services:
  - type: web
    name: one-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    plan: free
    healthCheckPath: /api/status
    envVars:
      - key: SQL_DSN
        value: file:/data/one-api.db?cache=shared&mode=rwc
      - key: SESSION_SECRET
        generateValue: true
      - key: GIN_MODE
        value: release
      - key: MEMORY_CACHE_ENABLED
        value: "true"
      - key: SYNC_FREQUENCY
        value: "600"
      - key: AUTOMATIC_DISABLE_CHANNEL_ENABLED
        value: "true"
    disk:
      name: one-api-data
      mountPath: /data
      sizeGB: 1
